<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ThreeSecondGame</title>
</head>
<body>
    <script type="text/javascript">
        let targetTime = 3;
        let running = false;
        let startTime = Date.now();
        let storedTimes = [];
        function startStop(){
            if (running == false){
                document.getElementById("theButton").innerHTML = "Stop";
                running = true;
                startTime = Date.now();
            }
            else {
                document.getElementById("theButton").innerHTML = "Start";
                running = false;
                let elapsedTime = (Date.now() - startTime)/1000;
                document.getElementById("timeShown").innerHTML = elapsedTime.toString();
                storedTimes.push(elapsedTime);
                if (elapsedTime > targetTime + .5 || elapsedTime < targetTime-.5){
                    document.getElementById("timeShown").setAttribute("style","color:red");
                }
                else if (elapsedTime > targetTime + .2 || elapsedTime < targetTime - .2){
                    document.getElementById("timeShown").setAttribute("style","color:black");
                }
                else if (elapsedTime == targetTime) {
                    document.getElementById("timeShown").setAttribute("style","color:green");
                }
                else{
                    document.getElementById("timeShown").setAttribute("style","color:blue");
                }
            }
        }
        function createChart(){
            for (i in storedTimes){
                console.log(storedTimes[i]);
            }
        }
        function calculateAvgTime() {
            if (storedTimes.length != 0) {
                let total = 0;
                let min = storedTimes[0];
                let max = storedTimes[0];
                for (i in storedTimes) {
                    total += storedTimes[i];
                    if (min > storedTimes[i]){
                        min = storedTimes[i];
                    }
                    if (max < storedTimes[i]){
                        max = storedTimes[i];
                    }
                }
                total = total / storedTimes.length;
                console.log("Average: " + total.toString());
                console.log("Min: " + min.toString());
                console.log("Max: " + max.toString());
            }
        }
    </script>
    <button id="theButton" onclick="startStop()">Start</button>
    <h2 id="timeShown" >

    </h2>
    <button id="chartButton" onclick="createChart()">Show Chart</button>
    <button id="detailsButton" onclick="calculateAvgTime()">Details</button>
</body>
</html>